---
toc: true
toc_sticky: true
categories:
- Computer Networking
title: "컴퓨터 네트워킹, [CHAPTER 03] 트랜스포트 레이어"
---

## 3.1 트랜스포트 계층 서비스 및 개요

- 서로 다른 호스트에서 동작하는 애플리케이션 프로세스들 간의 논리적 통신을 제공
- 종단 시스템에서 구현
- Segment : 트랜스포트 계층 패킷

### 3.1.1 트랜스포트 계층과 네트워크 계층 사이의 관계<br>

![03.01](/assets/img/Computer%20Networking/22-05-05-chapter-03/03.01.PNG)<br>

- 트랜스포트 계층 프로토콜은 서로 다른 호스트에서 동작하는 프로세스들 사이의 논리적 통신 제공
- 네트워크 계층 프로토콜은 호스트들 사이의 논리적 통신 제공

### 3.1.2 인터넷 트랜스포트 계층의 개요

- UDP : 애플리케이션에게 비신뢰적이고 비연결형인 서비스 제공
- TCP
    1. 애플리케이션에게 신뢰적이고 연결지향형 서비스를 제공
    2. 흐름제어, 순서번호, 확인응답, 타이머를 사용하여 데이터가 순서대로 정확하게 전달되도록 처리
    3. 혼잡 제어 가능
- IP
    1. 최선형 전달 서비스
    2. 세그먼트 전달외엔 어떤 보장도 없음
    3. 비신뢰적 서비스

## 3.2 다중화와 역다중화<br>

![03.02](/assets/img/Computer%20Networking/22-05-05-chapter-03/03.02.PNG)<br>

- 역다중화(demultiplexing) : 트랜스포트 계층 세그먼트의 데이터를 올바른 소켓으로 전달하는 작업
- 다중화(multiplexing) : 소켓으로부터 데이터를 모으고, 각 데이터에 헤더 정보로 캡슐화하고, 그 세그먼트들을 네트워크 계층으로 전달하는 작업
- 한 계층 에서의 한 프로토콜이 그 상위 계층의 여러 프로토콜에 의해 사용될 때마다 역다중화, 다중화가 필요함
- 세그먼트의 출발지 포트 번호, 목적지 포트 번호 필드 이용해 다중화<br>

![03.03](/assets/img/Computer%20Networking/22-05-05-chapter-03/03.03.PNG)<br>

### 비연결형 다중화와 역다중화<br>

![03.04](/assets/img/Computer%20Networking/22-05-05-chapter-03/03.04.PNG)<br>

- UDP 소켓의 애플리케이션 데이터 전송 과정
    1. 애플리케이션 데이터, 출발지 포트 번호, 목적지 포트 번호, 그리고 2개의 다른 값을 포함하는 트랜스포트 계층 세그먼트 생성
    2. 만들어진 세그먼트를 네트워크 계층으로 전달
    3. 네트워크 계층은 세그먼트를 IP 데이터그램으로 캡슐화하고 수신 호스트로 전달
    4. 세그먼트가 수신 호스트에 도착하면, 세그먼트 안의 목적지 포트 번호를 검사하고 그 세그먼트를 포트로 식별되는 소켓에 전달
- 세그먼트들이 동일한 목적지 IP 주소와 목적지 포트 번호를 가지면 같은 목적지 소켓을 통해 동일한 프로세스로 향한다.
- 출발지 포트 번호는 복귀 주소의 한 부분으로 사용

### 연결지향형 다중화와 역다중화<br>

- TCP 소켓은 UDP 소켓과 다르게 출발지 IP 주소, 출발지 포트 번호, 목적지 IP 주소, 목적지 포트 번호에 의해 식별
- 서버 호스트는 동시에 존재하는 많은 TCP 소켓을 지원할 수 있다. 

### 웹 서버와 TCP<br>

![03.05](/assets/img/Computer%20Networking/22-05-05-chapter-03/03.05.PNG)<br>

- 웹 서버는 각각의 연결에 따라서 새로운 프로세스를 만든다.
- 프로세스들은 각자 연결 소켓을 가지며, 이 연결 소켓을 통해서 HTTP 요청을 수신하고, HTTP 응답을 전송한다.
- 연결 소켓과 프로세스 사이에 항상 일대일 대응이 이루어지는 것은 아니다. -> 연결 소켓에 대한 멀티 쓰레딩
- 지속적인 HTTP : 클라이언트와 서버는 동일한 서버 소켓을 통해서 HTTP 메시지를 교환
- 비지속적인 HTTP
    1. 요청/응답마다 새로운 TCP 연결이 생성되고 종료
    2. 빈번한 소켓 생성과 종료는 서버에게 부담
