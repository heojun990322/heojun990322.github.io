---
toc: true
toc_sticky: true
categories:
- Computer Network
---

## 2.1 네트워크 애플리케이션의 원리
- **네트워크 애플리케이션**
    - 다른 종단 시스템에서 동작하고 네트워크를 통해 서로 통신하는 프로그램 -> 여러 종단 시스템에서 실행 가능 해야함
    - 네트워크 코어 장비는 네트워크 계층 및 그 하위 계층에서 기능 -> 소프트웨어 작성 시 네트워크 코어 장비를 고려할 필요는 없음

### 2.1.1 네트워크 애플리케이션 구조

- **클라이언트-서버 구조**<br>
    - **서버** : 항상 켜져 있는 호스트, 많은 클라이언트의 요청을 처리, 고정 IP 소유
    - **클라이언트** : 서버에게 요청, 클라이언트끼리 직접적인 통신 불가능
    - **데이터센터** : 하나의 서버로 모든 요청을 처리 할 수 없을 때 사용, 10만 개 정도의 서버로 구성 
    
- **P2P 구조**<br>
P2P 구조에서는 서버에 최소로 의존하거나 전혀 의존하지 않는다. 대신에 애플리케이션은 **피어**라는 간헐적으로 연결된 호스트 쌍이 직접 통신한다. 파일 공유 애플리케이션(토렌트), 인터넷 전화 및 비디오 컨퍼런스(스카이프) 등에서 P2P 구조가 사용된다. 이 구조는 **자가 확장성**이라는 특징이 있다. 각 피어들이 파일을 요구함으로써 작업 부하를 만들어 내지만 각 피어들은 또한 파일을 다른 피어들에게 분배함으로써 그 시스템에 서비스 능력을 추가한다. **비용 효율**면에서도 장점이 있는데 일반적으로 상당한 서버 기반구조와 서버 대역폭을 요구하지 않기 때문이다.

### 2.1.2 프로세스 간 통신
여러 종단 시스템에서 프로그램이 서로 통신할 때 실제 통신하는 것은 프로그램이 아니라 **프로세스**이다. 2개의 다른 종단 시스템에서 프로세스는 컴퓨터 네트워크를 통한 **메시지** 교환으로 서로 통신한다.

- **클라이언트와 서버 프로세스**<br>
네트워크 애플리케이션은 서로 메시지지를 보내는 두 프로세스로 구성된다. 통신하는 프로세스 각 쌍에 대해 일반적으로 **클라이언트**의 프로세스와 **서버**의 프로세스 중 하나로 이름 짓는다. 클라이언트는 통신 세션에서 통신을 초기화한다. 그리고 서버 프로세스는 세션을 시작하기 위해 접속을 기다린다. 웹 애플리케이션을 예로 들면 브라우저는 클라이너트 프로세스이고, 웹 서버는 서버 프로세스가 된다. P2P 파일 공유에서는 파일을 내려받는 피어를 클라이언트라 하고 파일을 올리는 피어를 서버라고 한다.

- **프로세스와 컴퓨터 네트워크 사이의 인터페이스**<br>
프로세스는 **소켓**을 통해 네트워크로 메시지를 보내고 받는다. 소켓을 비유하자면 프로세스는 집이고 소켓은 출입구이다. 송신 프로세스가 메시지를 다른 호스트의 프로세스로 보낼 때, 출입구(소켓) 바깥 네트워크로 메시지를 밀어낸다. 메시지가 목적지 호스트에 도착하면 수신 프로세스의 출입구를 거치고 프로세스가 메시지를 처리한다. 소켓을 더 정확하게 표현하면 호스트의 애플리케이션 계층과 트랜스포트 계층 간의 인터페이스다. 애플리케이션 개발자는 소켓의 애플리케이션 계층에 대한 모든 통제권을 갖지만 트랜스포트 계층에 대한 통제권은 거의 갖지 못한다. 트랜스포트 프로토콜 선택과 약간의 트랜스포트 계층 매개변수의 설정만 가능하다.

- **프로세스 주소 배정**<br>
한 호스트의 프로세스가 패킷을 다른 호스트의 프로세스로 보내기 위해 수신 프로세스는 주소를 갖고 있다. 주소는 호스트의 주소와 호스트 내의 수신 프로세스를 명시하는 식별자로 구성된다. 호스트 주소는 **IP주소**로, 수신 프로세스는 **포트 번호**로 식별한다. 

### 2.1.3 애플리케이션이 이용 가능한 트랜스포트 서비스
트랜스포트 프로토콜은 네트워크를 통해 메시지를 수신 프로세스의 소켓으로 이동시키는 책임을 갖고 있다. 네트워크 애플리케이션 개발자는 사용 가능한 트랜스포트 프로토콜 중에서 하나를 선택해야 한다. 트랜스포트 프로토콜이 제공할 수 있는 서비스를 분류하면 **신뢰적 데이터 전송**, **처리율**, **시간**, **보안**으로 나눌 수 있는데 이 네 가지 관점을 고려하여 애플리케이션 요구에 가장 적합한 프로토콜을 선택한다.

- **신뢰적 데이터 전송**<br>
전송한 패킷들은 여러 가지 이유로 컴퓨터 네트워크 내에서 손실될 수 있다. 이것을 방지하기 위해 프로토콜이 데이터를 책임지고 전송하는 서비스를 제공한다면 **신뢰적 데이터 전송**을 제공한다고 한다. 트랜스포트 계층이 제공할 수 있는 중요한 서비스는 프로세스 간 신뢰적 데이터 전송이다. 실시간 오디오/비디오와 같은 일부 멀티미디어 애플리케이션은 **손실 허용 애플리케이션**이라 불리는데 신뢰적 데이터 전송을 제공하지 않아도 받아들여 질 수 있다.

- **처리율**<br>
네트워크 경로를 따라 두 프로세스 간의 통신 세션에서 송신 프로세스가 수신 프로세스로 비트를 전달할 수 있는 비율을 **가용한 처리율**이라고 한다. 가용한 처리율은 시간에 따라 변동하는데 트랜스포트 프로토콜이 가용한 처리율을 일정 수준으로 보장하는 서비스를 제공할 수 있다. 가용한 처리율을 일정 수준 이상으로 요구하는 애플리케이션을 **대역폭 민감 애플리케이션**이라고 한다. 많은 현존하는 멀티미디어 애플리케이션은 대역폭에 민감하다. 반대로 요구 하는 가용한 처리율이 없는 애플리케이션은  **탄력적 애플리케이션**이라고 한다. 전자메일, 파일 전송, 웹 전송 등 융통성 있는 애플리케이션들이 해당된다.

- **시간**<br>
트랜스포트 프로토콜은 **시간 보장**을 제공할 수 있다. 예를 들어 송신자가 소켓으로 내보내는 모든 비트가 수신자의 소켓에 100msec 내에 도착하도록 하는 것이다. 실시간 애플리케이션의 경우 데이터 전송에 엄격한 시간제한 조건을 요구 한다. 비실시간 애플리케이션은 실시간 애플리케이션 만큼 종단간 지연에 엄격한 제약을 받지 않는다.

- **보안**<br>
트랜스포트 프로토콜은 하나 이상의 **보안** 서비스를 제공할 수 있다. 예를 들면 여러 서비스 중 송신 프로세스가 전송하는 모든 데이터를 암호화 하고 수신 프로세스로 전달하기 전에 데이터의 암호를 해독하여 **비밀성**을 제공하는 서비스가 있다. 그 외에 **데이터 무결성**, **종단 인증** 등의 서비스가 존재한다. 

### 2.1.4 인터넷 전송 프로토콜이 제공하는 서비스
인터넷이 애플리케이션에게 제공하는 전송 프로토콜은 두 가지가 있다. UDP와 TCP로 새로운 인터넷 애플리케이션을 개발할 때 첫 번째 결정해야 하는 것 중 하나는 저 둘 중 어느 것을 사용할지를 결정하는 것이다. 

- **TCP 서비스**<br>
TCP 서비스 모델은 연결지향형 서비스, 신뢰적인 데이터 전송 서비스, 혼잡 제어 서비스를 포함한다. 
    - **연결지향형 서비스**<br>
    메시지를 전송하기 전에 TCP는 클라이언트와 서버가 서로 전송 제어 정보를 교환하도록 하는 **핸드셰이킹** 과정을 거친다. 이 과정은 클라이언트와 서버에 패킷이 곧 도달할 것이니 준비하라고 알려주는 역할을 한다. 핸드셰이킹이 끝나면 **TCP 연결**이 두 프로세스의 소켓 사이에 존재한다고 얘기한다. 이 연결은 두 프로세스가 서로에게 동시에 메시지를 보낼 수 있기에 전이중 연결이라고 한다. 메시지 전송이 끝나면 연결을 끊는다.
    - **신뢰적인 데이터 전송 서비스**<br>
    애플리케이션의 한쪽이 바이트 스트림을 소켓으로 전달하면 그 바이트 스트림을 손실하거나 중복되지 않게 수신 소켓으로 전달한다.
    - **혼잡 제어 서비스**<br>
    프로세스 관점의 이득보다 인터넷의 전체 성능 향상을 위한 서비스이다. 네트워크가 혼잡 상태에 이르면 프로세스 속도를 낮춘다. 각 TCP연결이 네트워크 대역폭을 공평하게 공유할 수 있게끔 제한하는 것 이다.
    - **보안 서비스**<br>
    TCP 프로토콜은 보안 서비스를 제공하지 않는다. 그래서 TCP를 강화한 **SSL**이 개발됐다. SSL로 강화된 TCP는 기존 TCP가 하는 모든 것을 할 뿐만 아니라 암호화, 데이터 무결성 그리고 종단 인증을 포함하는 보안 서비스를 제공한다. SSL은 인터넷 프랜스포트 프로토콜이 아니라 애플리케이션 계층에서 구현된 것으로 TCP를 보완하는 역할을 한다.

- **UDP 서비스**<br>
UDP 서비스는 TCP와 반대되는 특징을 가졌다. UDP는 비연결형이다. 따라서 핸드셰이킹을 하지 않는다. 또한 비신뢰적인 데이터 전송 서비스를 제공한다. 수신 소켓의 메시지 도착이나 메시지 순서를 보장하지 않는다. UDP는 혼잡 제어를 하지 않는다. 네트워크 상태에 상관없이 프로세스 속도를 유지한다.

- **인터넷 트랜스포트 프로토콜이 제공하지 않는 서비스**<br>
